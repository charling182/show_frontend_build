(self["webpackChunk"]=self["webpackChunk"]||[]).push([[157],{36814:function(e,t,n){"use strict";function a(e){if(null==e)throw new TypeError("Cannot destructure "+e)}n.d(t,{Z:function(){return a}})},440:function(e){e.exports={"b-image":"b-image___3MLKV",image:"image___OEWpO"}},11158:function(e){e.exports={"message-management-container":"message-management-container___2dObn","search-box":"search-box___2DLqX","search-input":"search-input___OS_KS","content-column":"content-column___3zRt3","content-username":"content-username___3Gv2q","wrap-content":"wrap-content___2-j3n","user-avatar":"user-avatar___lFtxO",username:"username___1jduW",content:"content___2ZjCi","project-name":"project-name___1msHV","task-name":"task-name___TwGIH",state:"state___1dBkm",redo:"redo___3KeP0",done:"done___3mOCB",pagination:"pagination___2Nyi7"}},48465:function(e,t,n){"use strict";n(90577);var a=n(31580),r=n(67294),c=n(440),o=n.n(c),i=e=>{var t=e.src,n=e.width,c=void 0===n?50:n,i=e.height,s=void 0===i?50:i,u=e.borderRadius,l=void 0===u?3:u;return r.createElement("div",{className:o()["b-image"]},r.createElement(a.Z,{src:t,className:o().image,style:{width:"".concat(c,"px"),height:"".concat(s,"px"),borderRadius:"".concat(l,"px")}}))};t["Z"]=i},73261:function(e,t,n){"use strict";n(91772);var a=n(12774),r=n(91896),c=(n(36805),n(70236)),o=(n(68137),n(50532)),i=(n(13753),n(48429)),s=(n(14643),n(92909)),u=n(11849),l=n(90636),d=n(3182),m=n(2824),_=n(67294),p=n(11158),v=n.n(p),f=n(30155),h=n(7511),Z=n(48465),g=e=>{var t=e.type,n=void 0===t?"mention":t,p=(0,h.tT)("@@initialState"),g=p.initialState,y=(0,h.v9)((e=>e)),w=y.socket.messageCount,k=g||{},b=(0,_.useState)([]),E=(0,m.Z)(b,2),S=E[0],x=E[1],C=(0,_.useState)(!1),O=(0,m.Z)(C,2),j=O[0],N=O[1],z=(0,_.useState)({current:1,pageSize:10}),K=(0,m.Z)(z,2),L=K[0],R=K[1],T=(0,_.useState)(0),B=(0,m.Z)(T,2),H=B[0],I=B[1],q=(0,_.useState)(""),D=(0,m.Z)(q,2),G=D[0],M=D[1],P=(0,_.useState)(0),V=(0,m.Z)(P,2),W=V[0],F=V[1],X=(0,_.useState)({receiver_id:k.id,prop_order:"id",order:"desc",limit:L.pageSize,offset:(L.current-1)*L.pageSize,type:n,keyword:""}),A=(0,m.Z)(X,2),J=A[0],Q=A[1],U=function(){var e=(0,d.Z)((0,l.Z)().mark((function e(){var t,n,a,r;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return N(!0),console.log("fetchData-------------\u6d88\u606f\u6570\u53d8\u5316,\u9a71\u52a8\u9875\u9762\u66f4\u65b0\u4e00\u4e0b"),e.next=4,(0,f.xm)(J);case 4:t=e.sent,n=t.data,a=n.rows,r=n.count,I(r),x(a),N(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=e=>{R((0,u.Z)((0,u.Z)({},L),{},{current:e})),Q((0,u.Z)((0,u.Z)({},J),{},{offset:(e-1)*L.pageSize}))},$=e=>{M(e.target.value),e.target.value||Q((0,u.Z)((0,u.Z)({},J),{},{keyword:""}))},ee=e=>{M(e),Q((0,u.Z)((0,u.Z)({},J),{},{keyword:e}))},te=function(){var e=(0,d.Z)((0,l.Z)().mark((function e(t){var n,a;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,f.o6)((0,u.Z)((0,u.Z)({},t),{},{is_read:1}));case 2:n=e.sent,a=n.code,200===a&&(s.default.success("\u64cd\u4f5c\u6210\u529f"),F(W+1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=[{title:"\u5185\u5bb9",key:"content",render:(e,t)=>{var n;return _.createElement("div",{className:v()["content-column"]},_.createElement(Z.Z,{src:t.actor&&t.actor.avatar||"",width:32,height:32,borderRadius:32}),_.createElement("span",{className:v()["content-username"]},null===t||void 0===t||null===(n=t.actor)||void 0===n?void 0:n.username),_.createElement("span",{dangerouslySetInnerHTML:{__html:t.content}}))}},{title:"\u65f6\u95f4",dataIndex:"created_at",key:"created_at"},{title:"\u64cd\u4f5c",key:"action",render:(e,t)=>_.createElement("div",null,_.createElement(i.Z,{type:"link",onClick:()=>h.m8.push(t.url)},"\u67e5\u770b"),_.createElement(i.Z,{type:"link",disabled:1===t.is_read,onClick:()=>te(t)},1===t.is_read?"\u5df2\u8bfb":"\u6807\u8bb0\u4e3a\u5df2\u8bfb"))}];return(0,_.useEffect)((()=>{U()}),[W,J,w]),_.createElement("div",{className:v()["message-management-container"]},_.createElement("div",{className:v()["search-box"]},_.createElement(o.Z.Search,{className:v()["search-input"],value:G,onChange:$,placeholder:"\u8f93\u5165\u641c\u7d22\u5185\u5bb9",allowClear:!0,enterButton:"\u641c\u7d22",size:"middle",onSearch:ee})),_.createElement(c.Z,{dataSource:S,columns:ne,rowKey:"id",loading:j,pagination:!1}),_.createElement("div",{className:v().pagination},_.createElement(a.Z,(0,r.Z)({},L,{total:H,onChange:Y}))))};t["Z"]=g},90347:function(e,t,n){"use strict";n.r(t);var a=n(67294),r=n(73261),c=()=>a.createElement(r.Z,{type:"personal"});c.menu={name:"\u79c1\u4fe1",icon:"LineChartOutlined"},c.order=3,t["default"]=c},23270:function(e){e.exports=function(e,t,n,a){var r=n?n.call(a,e,t):void 0;if(void 0!==r)return!!r;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var c=Object.keys(e),o=Object.keys(t);if(c.length!==o.length)return!1;for(var i=Object.prototype.hasOwnProperty.bind(t),s=0;s<c.length;s++){var u=c[s];if(!i(u))return!1;var l=e[u],d=t[u];if(r=n?n.call(a,l,d,u):void 0,!1===r||void 0===r&&l!==d)return!1}return!0}}}]);