(self["webpackChunk"]=self["webpackChunk"]||[]).push([[685],{440:function(e){e.exports={"b-image":"b-image___3MLKV",image:"image___OEWpO"}},19786:function(e){e.exports={"btn-tooltip":"btn-tooltip___2rC7w"}},12989:function(e){e.exports={"popover-content-executor-selector":"popover-content-executor-selector___28gtz","wrap-current-executor":"wrap-current-executor___3OiO9",title:"title___-r0BW","current-executor":"current-executor___1u9YY","wrap-info":"wrap-info___Ml-d1",name:"name___1QxvU","wrap-footer":"wrap-footer___3ar83","executor-select":"executor-select___2kDOE",btn:"btn___3aUlO","user-avatar":"user-avatar___2INKc","el-icon-question":"el-icon-question___j_Tql"}},98165:function(e){e.exports={"add-member-to-project-dialog":"add-member-to-project-dialog___2QnuD",iconfont:"iconfont___a5fVK","wrap-content":"wrap-content___1aon_","wrap-intro":"wrap-intro___36CpX","user-list":"user-list___VLP62","wrap-list-item":"wrap-list-item___GFwYa","user-avatar":"user-avatar___180sR","user-info":"user-info___1xUXZ",foot:"foot___1-H4c","user-emial":"user-emial___1biT-","wrap-ctrl":"wrap-ctrl___2H7je",line:"line___3LExA"}},36532:function(e){e.exports={"wrap-project-task-dropdown":"wrap-project-task-dropdown___3Kopf","wrap-el-dropdown-item":"wrap-el-dropdown-item___gJNcE","input-box":"input-box___1_E5E","project-task-wrap-dropdown-input":"project-task-wrap-dropdown-input___19D3m","project-task-wrap-dropdown-item":"project-task-wrap-dropdown-item___1BRjB",info:"info___3kBVY",name:"name___2oesD","project-task-project-dropdown":"project-task-project-dropdown___3u9cP","wrap-link":"wrap-link___1Hi6y","el-icon-arrow-down":"el-icon-arrow-down___3wk3m","project-name":"project-name___3cOTD","project-task":"project-task___3a5OW","wrap-nav":"wrap-nav___Ysw2q",tab:"tab___3MMmO","item-tab":"item-tab___8eO-v",active:"active___2ucvO","wrap-controller":"wrap-controller___2nowL","wrap-content":"wrap-content___3WgxV"}},21371:function(e){e.exports={"create-task-list-wrap-form":"create-task-list-wrap-form___213wS",title:"title___2HuYM","color-light":"color-light___3W0nz","create-task-list":"create-task-list___2t9kU",disabled:"disabled___2IQwD"}},27387:function(e){e.exports={"create-task":"create-task___3EhxW","el-dropdown-link":"el-dropdown-link___3Q5lf","wrap-item":"wrap-item___1NeiA","btn-more":"btn-more___E5JlY","btn-ctrl":"btn-ctrl___12DpA"}},90322:function(){},32677:function(e){e.exports={"editor-modal":"editor-modal___3g-aF","form-item":"form-item___2X5kX",label:"label___103Ti"}},70021:function(e){e.exports={"log-comment":"log-comment___3L1dI",content:"content___244Qf","ellipsis-content":"ellipsis-content___22vDU","content-comment":"content-comment___3oZHF"}},25398:function(e){e.exports={"popover-content-executor-selector":"popover-content-executor-selector___2y2RA","wrap-current-executor":"wrap-current-executor___2nMzp",title:"title___3-zrA","current-executor":"current-executor___1wITS","wrap-info":"wrap-info___329cg",name:"name___2-g03",disabled:"disabled___Hk5us","wrap-footer":"wrap-footer___3dLLv",participator:"participator___33L_E",point:"point___ggR3w","user-list":"user-list___3-62q",item:"item___11gwp",btn:"btn___veK3s","el-icon-circle-plus":"el-icon-circle-plus___iT7Rb",icon:"icon___1fvxA"}},71521:function(e){e.exports={"wrap-item-menu":"wrap-item-menu___3bc4E","task-dialog":"task-dialog___2VJ82","on-normal":"on-normal___1H2wg","on-recycle":"on-recycle___2ZSZT",tip:"tip___18QZi","el-dropdown-link-type":"el-dropdown-link-type___15lH_","wrap-task":"wrap-task___2kjHA","wrap-name":"wrap-name___3r8FB","wrap-name-done":"wrap-name-done____A9pq","wrap-item":"wrap-item___2ks8r",iconfont:"iconfont___2EEXK",label:"label___3Dggr",content:"content___1JJ_Z","wrap-date":"wrap-date___-qW20","el-icon-minus":"el-icon-minus___39b0_","wrap-remark":"wrap-remark___2jGWh","btn-remark":"btn-remark___3HDDs","wrap-remark-html":"wrap-remark-html___11h62",btn:"btn___1jpHB","wrap-rich-text":"wrap-rich-text___1ZzrI","wrap-btn-remark":"wrap-btn-remark___fLB6N","wrap-tag":"wrap-tag___3U2wb","btn-add-tag":"btn-add-tag___2attn","el-icon-circle-plus":"el-icon-circle-plus___1bhm0","wrap-dynamic":"wrap-dynamic___2owiQ","close-icon":"close-icon___2A2CZ","menu-item":"menu-item___1N_uj","menu-item-title":"menu-item-title___yLqrJ"}},12082:function(){},26697:function(e){e.exports={"list-group-item":"list-group-item___2D2WH",state:"state___NBXNK","wrap-done":"wrap-done___21oaW",iconfont:"iconfont___3D0V_",content:"content___39VnZ",name:"name___39hra",info:"info___3L2gc","info-item":"info-item___2N_MV","task-date":"task-date___huA1M","task-date-overdue":"task-date-overdue___1erFD","task-date-intraday":"task-date-intraday___1qJJk","task-date-recently":"task-date-recently___gNGO8","task-date-safety":"task-date-safety___VhGVK",executor:"executor___1xw25","task-priority":"task-priority___SLhCs","task-state-success":"task-state-success___3QJcY","list-group-item-done":"list-group-item-done___1vWI1","color-light":"color-light___1Na0-"}},66760:function(){},51153:function(e){e.exports={"task-log":"task-log___1x7l3","wrap-log":"wrap-log___3GIoP","wrap-filter":"wrap-filter___3sb1p","dropdown-title":"dropdown-title___1MJK3","log-list":"log-list___3O2PK","btn-more":"btn-more___3Cca6","el-icon-more":"el-icon-more___2absY",item:"item___1ftmm",info:"info___O5nvx","info-header":"info-header___eeMcq","operator-icon":"operator-icon___9mWRD",icon:"icon___1lros","user-avatar":"user-avatar___2mXPy","username-and-remark":"username-and-remark___2vTyn","username-comment":"username-comment___udlrJ","create-date":"create-date___3HqeX","wrap-comment":"wrap-comment___3f4Mb",input:"input___39xIL","el-textarea__inner":"el-textarea__inner___sJSwH",ctrl:"ctrl___2ACwG","btn-emoji":"btn-emoji___2lwSs","color-light":"color-light___-HsyR","mention-user-list":"mention-user-list___302rI","user-list":"user-list___W3aIc","user-item":"user-item___1rVie"}},26330:function(e){e.exports={"working-hour":"working-hour___2GxUR",label:"label___3Pos_",title:"title___Wc9XA",iconfont:"iconfont___1lGCC","el-icon-edit-outline":"el-icon-edit-outline___2iZpK",content:"content___9Sv8D","btn-add-working-hour":"btn-add-working-hour___2auZ0","el-icon-plus":"el-icon-plus___mC2uw","wrap-working-hour-list":"wrap-working-hour-list___2rHlt",item:"item___3m2cu","wrap-working-hour-content":"wrap-working-hour-content___34nQK","wrap-info":"wrap-info___1opek",name:"name___3p9o-","start-date":"start-date___1xiWZ",description:"description___i4fNK",ctrl:"ctrl___K694q",icon:"icon___3RJDz"}},27217:function(e){e.exports={"task-list":"task-list___3Banz","wrap-item":"wrap-item___2veR9","task-list-info":"task-list-info___2xgIx",name:"name___358vk","name-point":"name-point___U6UFT",more:"more___1JjrM","wrap-draggable":"wrap-draggable___14I19","list-group":"list-group___2nTSv","btn-createTask":"btn-createTask___DxfPj","el-icon-plus":"el-icon-plus___Nv2VV","menu-item":"menu-item___1zeWl","menu-item-title":"menu-item-title___19BKa"}},48465:function(e,t,a){"use strict";a(90577);var n=a(31580),r=a(67294),c=a(440),s=a.n(c),l=e=>{var t=e.src,a=e.width,c=void 0===a?50:a,l=e.height,i=void 0===l?50:l,o=e.borderRadius,m=void 0===o?3:o;return r.createElement("div",{className:s()["b-image"]},r.createElement(n.Z,{src:t,className:s().image,style:{width:"".concat(c,"px"),height:"".concat(i,"px"),borderRadius:"".concat(m,"px")}}))};t["Z"]=l},61191:function(e,t,a){"use strict";a(81984);var n=a(6716),r=(a(13753),a(48429)),c=a(67294),s=a(19786),l=a.n(s),i=e=>{var t=e.tooltipContent,a=void 0===t?"":t,s=e.icon,i=e.size,o=void 0===i?"mini":i,m=e.circle,u=void 0===m||m,d=e.disabled,p=void 0!==d&&d,_=e.onClick,v=void 0===_?()=>{}:_,E=e.children,f=e.btnStyle,k=void 0===f?{}:f,Z=e.type,w=void 0===Z?"":Z;return c.createElement(n.Z,{trigger:["hover"],className:l()["btn-tooltip"],title:a,placement:"top",mouseEnterDelay:.3},c.createElement(r.Z,{style:k,icon:s,size:o,type:w,shape:u?"circle":"default",disabled:p,onClick:v},E))};t["Z"]=i},65842:function(e,t,a){"use strict";a(26780);var n=a(86444),r=(a(13753),a(48429)),c=(a(58210),a(87240)),s=(a(68137),a(50532)),l=(a(14643),a(92909)),i=a(90636),o=a(11849),m=a(3182),u=a(2824),d=a(67294),p=a(40110),_=a(31223),v=a(31662),E=a(98165),f=a.n(E),k=a(7511),Z=a(48465),w=a(30155),h=e=>{var t=e.project,a=e.addMemberVisible,E=void 0!==a&&a,h=e.handleAddMemberFinish,j=(0,k.tT)("@@initialState"),g=j.initialState,y=(0,d.useState)(!1),b=(0,u.Z)(y,2),x=(b[0],b[1],(0,d.useState)(!1)),N=(0,u.Z)(x,2),S=N[0],C=N[1],T=(0,d.useState)(""),z=(0,u.Z)(T,2),P=z[0],M=z[1],L=(0,d.useState)(1),D=(0,u.Z)(L,2),I=(D[0],D[1],(0,d.useState)([])),O=(0,u.Z)(I,2),B=(O[0],O[1]),H=(0,d.useState)([]),R=(0,u.Z)(H,2),V=R[0],Y=R[1],A=(null===g||void 0===g?void 0:g.id)===t.manager_id,F=A?"\u9080\u8bf7\u65b0\u6210\u5458":"\u9879\u76ee\u6210\u5458";(0,d.useEffect)((()=>{E&&q()}),[E,P]),(0,d.useEffect)((()=>{}),[V]);var q=function(){var e=(0,m.Z)((0,i.Z)().mark((function e(){var a,n,r;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return C(!0),Y([]),B([]),a={keyword:P},A||(a.project_id=t.id),e.next=7,(0,w.lE)(a);case 7:n=e.sent,r=n.data,B(r),Y(r.rows.map((e=>(0,o.Z)((0,o.Z)({},e),{},{projectIds:e.projects&&e.projects.map((e=>e.id)),invited:!1})))),C(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=(0,m.Z)((0,i.Z)().mark((function e(t){var a,n;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,w.l8)(t);case 2:a=e.sent,n=a.code,200===n&&l.default.success("\u5df2\u53d1\u8d77\u9080\u8bf7");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=(0,m.Z)((0,i.Z)().mark((function e(a){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J({group:"Projects",group_id:t.id,receiver_id:a.id});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=(0,m.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return d.createElement(n.Z,{title:F,open:E,className:f()["add-member-to-project-dialog"],width:"530px",footer:null,onCancel:()=>h("quit")},d.createElement("div",{className:f()["wrap-content"]},A&&d.createElement("div",{className:f()["wrap-intro"]},d.createElement("span",null,"\u8d26\u53f7\u9080\u8bf7")),d.createElement(s.Z,{value:P,placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\u6216\u90ae\u7bb1\u67e5\u627e",prefix:d.createElement(p.Z,null),onChange:e=>M(e.target.value)}),d.createElement("div",{className:f()["user-list"]},S?d.createElement(c.Z,null):V.map(((e,a)=>d.createElement("div",{key:a,className:f()["wrap-list-item"]},d.createElement(Z.Z,{className:f()["user-avatar"],src:e.avatar||"",width:"32",height:"32",borderRadius:"32"}),d.createElement("div",{className:f()["user-info"]},d.createElement("div",{className:f()["user-name"]},e.username),d.createElement("div",{className:f().foot},d.createElement("div",{className:f()["user-email"]},e.email))),d.createElement("div",{className:f()["wrap-ctrl"]},e.projectIds.includes(t.id)?d.createElement("div",null,e.id!==t.manager_id&&t.manager_id===(null===g||void 0===g?void 0:g.id)?d.createElement(r.Z,{size:"small",type:"danger",icon:d.createElement(v.Z,null),onClick:()=>U(e)},"\u79fb\u51fa"):d.createElement("div",null,d.createElement("span",{className:f().iconfont,style:{marginRight:5}},e.id===t.manager_id?"\u62e5\u6709\u8005":"\u5df2\u52a0\u5165"))):d.createElement(r.Z,{size:"small",disabled:e.invited,type:"primary",icon:d.createElement(_.Z,null),onClick:()=>W(e)},e.invited?"\u5df2\u9080\u8bf7":"\u9080\u8bf7"))))))))};t["Z"]=h},76907:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return yt}});a(13753);var n=a(48429),r=(a(19597),a(58393)),c=(a(68137),a(50532)),s=(a(37482),a(91522)),l=a(90636),i=(a(14643),a(92909)),o=a(3182),m=a(2824),u=a(67294),d=a(34804),p=a(36532),_=a.n(p),v=a(88284),E=a(40110),f=a(89366),k=a(30155),Z=a(30112),w=a(7511),h=a(11849),j=a(47389),g=a(82061),y=a(3471),b=a(51042),x=a(27217),N=a.n(x),S=(a(34276),a(56466)),C=a(21371),T=a.n(C),z=e=>{var t,a=e.currentProject,r=e.handleCreateSuccess,s=(0,w.tT)("@@initialState"),d=s.initialState,p=d,_=null===a||void 0===a||null===(t=a.member)||void 0===t?void 0:t.some((e=>e.id===p.id)),v=(0,u.useState)(!1),E=(0,m.Z)(v,2),f=E[0],Z=E[1],h=(0,u.useState)(""),j=(0,m.Z)(h,2),g=j[0],y=j[1],x=a.id,N=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var t,a;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,k.PU)({name:g,project_id:x});case 2:t=e.sent,a=t.code,200===a&&(Z(!1),y(""),i.default.success("\u4efb\u52a1\u5217\u8868\u521b\u5efa\u6210\u529f"),r());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=e=>{e||(Z(!1),y(""))},z=()=>{_&&Z(!0)},P=!_,M=u.createElement("div",{className:"".concat(T()["create-task-list-wrap-form"])},u.createElement("div",{className:T().title},"\u65b0\u5efa\u4efb\u52a1\u5217\u8868"),u.createElement(c.Z,{value:g,onChange:e=>y(e.target.value),placeholder:"\u5217\u8868\u540d\u79f0",style:{width:"100%",margin:"15px 0"}}),u.createElement(n.Z,{type:"primary",style:{width:"100%",marginBottom:"10px"},disabled:!g.length,onClick:N},"\u521b\u5efa"));return u.createElement("div",{className:"".concat(T()["create-task-list"]," ").concat(T()["color-light"])},u.createElement("div",null,u.createElement(S.Z,{content:M,trigger:"click",open:f,onOpenChange:C},u.createElement("span",{onClick:z,className:P?T().disabled:""},u.createElement(b.Z,null)," \u65b0\u5efa\u4efb\u52a1\u5217\u8868"))))},P=z,M=(a(25324),a(45733)),L=(a(90930),a(23040)),D=a(50361),I=a.n(D),O=a(63783),B=a(12989),H=a.n(B),R=a(65842),V=e=>{var t=e.isCurrentProjectMember,a=void 0!==t&&t,r=e.executorId,s=e.currentProject,i=e.showAddUser,d=void 0===i||i,p=e.showNoOne,_=void 0!==p&&p,Z=e.onSelect,h=(0,w.tT)("@@initialState"),j=h.initialState,g=(0,u.useState)(!1),y=(0,m.Z)(g,2),b=y[0],x=y[1],N=(0,u.useState)(""),C=(0,m.Z)(N,2),T=C[0],z=C[1],P=(0,u.useState)([]),M=(0,m.Z)(P,2),D=M[0],B=M[1],V=(0,u.useState)({id:0,username:"\u5f85\u8ba4\u9886"}),Y=(0,m.Z)(V,2),A=Y[0],F=Y[1],q=(0,u.useState)([]),J=(0,m.Z)(q,2),W=J[0],U=J[1],K=j||{},Q={id:0,username:"\u5f85\u8ba4\u9886"},G=(0,u.useState)(0),X=(0,m.Z)(G,2),$=(X[0],X[1],(0,u.useState)(!1)),ee=(0,m.Z)($,2),te=ee[0],ae=ee[1],ne=K.id===(null===s||void 0===s?void 0:s.manager_id);(0,u.useEffect)((()=>{null!==s&&void 0!==s&&s.id&&se()}),[r,s]),(0,u.useEffect)((()=>{var e=I()(W)||[];e=e.filter((e=>e.id!==A.id)),B([...e])}),[A,W]);var re=()=>{x(!1)},ce=()=>{setTimeout(se,300)},se=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var t,a;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,k.lE)({keyword:T,project_id:s.id});case 2:t=e.sent,a=t.data.rows,U(_?[...a,Q]:a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=e=>{F(e),Z(e),re()};(0,u.useEffect)((()=>{b||z("")}),[b]);var ie=()=>{ae(!0)},oe=e=>{ae(!1)},me=u.createElement("div",{className:H()["popover-content-executor-selector"]},u.createElement(c.Z,{value:T,onChange:e=>z(e.target.value),placeholder:"\u641c\u7d22",prefix:u.createElement(E.Z,null),onKeyUp:ce}),u.createElement("div",{className:H()["wrap-current-executor"]},u.createElement("div",{className:H().title},"\u6267\u884c\u8005"),u.createElement("div",{className:H()["current-executor"]},u.createElement("div",{className:H()["wrap-info"]},u.createElement(L.C,{className:H()["user-avatar"],size:"small",src:A.avatar||"",icon:u.createElement(f.Z,null)}),u.createElement("span",{className:H().name},A.username)),u.createElement(v.Z,null)),u.createElement("div",{className:H().title},"\u5176\u4ed6\u6210\u5458"),null===D||void 0===D?void 0:D.map((e=>u.createElement("div",{key:e.id,className:"".concat(H()["current-executor"]," ").concat(H()["disabled-custom"]),onClick:()=>le(e)},u.createElement("div",{className:H()["wrap-info"]},u.createElement(L.C,{className:H()["user-avatar"],size:"small",src:e.avatar||"",icon:u.createElement(f.Z,null)}),u.createElement("span",{className:H().name},e.username)),A.id===e.id&&u.createElement(v.Z,null))))),d&&ne&&u.createElement("div",{className:H()["wrap-footer"]},u.createElement(n.Z,{type:"primary",style:{width:"100%"},onClick:ie},"\u9080\u8bf7\u65b0\u6210\u5458")));return u.createElement("div",{className:H()["executor-select"]},u.createElement(S.Z,{content:me,title:"\u6267\u884c\u8005",trigger:"click",open:b,onOpenChange:x},u.createElement(n.Z,{type:"text",disabled:!a,className:H().btn},u.createElement(L.C,{className:H()["user-avatar"],size:"small",src:A.avatar||"",icon:u.createElement(f.Z,null)}),A.username,u.createElement(O.Z,null))),u.createElement(R.Z,{project:s,handleAddMemberFinish:oe,addMemberVisible:te}))},Y=V,A=a(27387),F=a.n(A),q=a(1892),J=c.Z.TextArea,W=e=>{var t=e.currentProject,a=e.handleCreateTaskSuccess,c=e.isCurrentProjectMember,p=e.currentTaskListObj,_=(0,w.tT)("useTask"),E=_.taskStatusList,f=_.taskTypeList,Z=_.taskPrioritysList,h=(0,u.useState)(""),j=(0,m.Z)(h,2),g=j[0],y=j[1],b=(0,u.useState)({}),x=(0,m.Z)(b,2),N=x[0],S=x[1],C=(0,u.useState)({id:0}),T=(0,m.Z)(C,2),z=T[0],P=T[1];u.useEffect((()=>{S(f[0])}),[f]);var L=u.createElement(s.Z,null,f.map((e=>u.createElement(s.Z.Item,{key:e.id,onClick:()=>D(e)},u.createElement("span",null,u.createElement(q.B,{type:e.icon,style:{color:e.color,fontSize:"16px"}}),u.createElement("span",{style:{margin:"0 4px"}},e.name)),N.id===e.id&&u.createElement(v.Z,null))))),D=e=>{S(e)},I=e=>{P(e)},O=()=>{a("quit")},B=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var n,r;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(g){e.next=3;break}return i.default.warning("\u4efb\u52a1\u6807\u9898\u4e0d\u53ef\u4ee5\u4e3a\u7a7a"),e.abrupt("return");case 3:return e.next=5,(0,k.vr)({name:g,task_list_id:p.id,task_type_id:N.id,task_state_id:E[0].id,task_priority_id:Z[0].id,executor_id:z.id,project_id:t.id});case 5:n=e.sent,r=n.code,200===r&&(i.default.success("\u4efb\u52a1\u521b\u5efa\u6210\u529f"),a("success"),P({id:0}),y(""));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.createElement("div",{className:F()["create-task"]},u.createElement(r.Z,{overlay:L,trigger:["click"]},u.createElement("span",{className:F()["el-dropdown-link"]},u.createElement(q.B,{type:null===N||void 0===N?void 0:N.icon,style:{color:null===N||void 0===N?void 0:N.color,fontSize:"16px"}}),u.createElement("span",{style:{margin:"0 4px"}},null===N||void 0===N?void 0:N.name),u.createElement(d.Z,null))),u.createElement("div",{className:F()["wrap-item"]},u.createElement(J,{rows:3,value:g,onChange:e=>y(e.target.value),placeholder:"\u8f93\u5165\u6807\u9898"})),u.createElement("div",{className:F()["wrap-item"]},u.createElement(Y,{currentProject:t,executorId:z.id,isCurrentProjectMember:c,showNoOne:!0,onSelect:I})),u.createElement(M.Z,{style:{display:"flex",justifyContent:"flex-end"},className:F()["wrap-item"]},u.createElement(n.Z,{onClick:O},"\u53d6\u6d88"),u.createElement(n.Z,{type:"primary",onClick:B},"\u521b\u5efa")))},U=W,K=a(7739),Q=a.n(K),G=a(66760),X=a.n(G),$=(a(81984),a(6716)),ee=a(26697),te=a.n(ee),ae=(a(5317),a(87555)),ne=(a(52222),a(65507)),re=(a(14943),a(74356)),ce=(a(68059),a(84737)),se=(a(26780),a(86444)),le=(a(74393),a(74907)),ie=a(71521),oe=a.n(ie),me=a(61191),ue=a(87588),de=a(28508),pe=a(9948),_e=a.n(pe),ve=a(30071),Ee=(a(11826),a(76888)),fe=a(32677),ke=a.n(fe),Ze=a(54922),we=a.n(Ze),he=a(66187),je=a.n(he),ge=a(14325),ye=a.n(ge),be=a(79279),xe=a.n(be),Ne=a(61966),Se=a.n(Ne),Ce=a(40452),Te=a.n(Ce);_e().extend(je()),_e().extend(we()),_e().extend(xe()),_e().extend(ye()),_e().extend(Se()),_e().extend(Te());var ze=e=>{var t=e.currentTask,a=e.currentProject,n=e.selectedWorkHour,r=e.workHourDialogVisible,s=void 0!==r&&r,d=e.isCurrentProjectMember,p=void 0!==d&&d,_=e.handleWorkHourSuccess,v=(0,u.useState)({start_date:_e()().format("YYYY-MM-DD"),work_time:1,executor_id:1}),E=(0,m.Z)(v,2),f=E[0],Z=E[1],w=e=>{Z((0,h.Z)((0,h.Z)({},f),{},{executor_id:e.id}))},j=()=>{_("quit")},g=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var r,c,s,o,m;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(f.work_time){e.next=3;break}return i.default.warning("\u5de5\u65f6\u6570\u4e0d\u80fd\u4e3a\u7a7a"),e.abrupt("return");case 3:if(r=(0,h.Z)((0,h.Z)({},f),{},{task_id:null===t||void 0===t?void 0:t.id,project_id:null===a||void 0===a?void 0:a.id}),null===n||void 0===n||!n.id){e.next=12;break}return e.next=7,(0,k.fU)(r);case 7:c=e.sent,s=c.code,200===s&&(i.default.success("\u4efb\u52a1\u5de5\u65f6\u7f16\u8f91\u6210\u529f"),_("success")),e.next=17;break;case 12:return e.next=14,(0,k.rG)(r);case 14:o=e.sent,m=o.code,200===m&&(i.default.success("\u4efb\u52a1\u5de5\u65f6\u6dfb\u52a0\u6210\u529f"),_("success"));case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=(e,t)=>{console.log(e,t),Z((0,h.Z)((0,h.Z)({},f),{},{start_date:t}))};return(0,u.useEffect)((()=>{s&&null!==n&&void 0!==n&&n.id&&Z((0,h.Z)((0,h.Z)({},f),n))}),[n,s]),u.createElement(se.Z,{title:null!==n&&void 0!==n&&n.id?"\u5b9e\u9645\u5de5\u65f6":"\u5b9e\u9645\u5de5\u65f6\u5f55\u5165",open:s,onCancel:j,onOk:g},u.createElement("div",{className:ke()["editor-modal"]},u.createElement("div",{className:ke()["form-item"]},u.createElement("div",{className:ke().label},"\u5de5\u65f6\u6267\u884c\u8005:"),u.createElement(Y,{currentProject:a,executorId:null===f||void 0===f?void 0:f.executor_id,isCurrentProjectMember:p,showNoOne:!0,onSelect:w})),u.createElement("div",{className:ke()["form-item"]},u.createElement("div",{className:ke().label},"\u65e5\u671f:"),u.createElement(le.Z,{value:null!==f&&void 0!==f&&f.start_date?_e()(f.start_date):null,format:"YYYY-MM-DD",onChange:y})),u.createElement("div",{className:ke()["form-item"]},u.createElement("div",{className:ke().label},"\u5b9e\u9645\u5de5\u65f6\u6570:"),u.createElement(Ee.Z,{value:null===f||void 0===f?void 0:f.work_time,style:{width:"100%"},onChange:e=>{Z((0,h.Z)((0,h.Z)({},f),{},{work_time:e}))}})),u.createElement("div",{className:ke()["form-item"]},u.createElement("div",{className:ke().label},"\u5de5\u4f5c\u8fdb\u5c55:"),u.createElement(c.Z.TextArea,{value:null===f||void 0===f?void 0:f.description,onChange:e=>{Z((0,h.Z)((0,h.Z)({},f),{},{description:e.target.value}))}}))))},Pe=ze,Me=a(26330),Le=a.n(Me),De=e=>{var t=e.currentTask,a=e.currentProject,r=e.isCurrentProjectMember,c=void 0!==r&&r,s=(0,u.useState)({}),d=(0,m.Z)(s,2),p=d[0],_=d[1],v=(0,u.useState)(!1),E=(0,m.Z)(v,2),f=E[0],Z=E[1],w=(0,u.useState)([]),h=(0,m.Z)(w,2),y=h[0],x=h[1],N=(0,u.useState)(0),S=(0,m.Z)(N,2),C=S[0],T=S[1],z=e=>{e.currentTarget.blur(),Z(!0)},P=(e,t)=>{t.currentTarget.blur(),_(e),Z(!0)},M=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(t,a){var n,r;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a.currentTarget.blur(),console.log("\u5220\u9664\u5de5\u65f6",t),e.next=4,(0,k.C1)({ids:[t.id]});case 4:n=e.sent,r=n.code,200===r&&(T(C+1),i.default.success("\u5220\u9664\u6210\u529f"));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),D=e=>new Date(e).getFullYear()===(new Date).getFullYear()?_e()(e).format("M\u6708D\u65e5"):_e()(e).format("YYYY\u5e74M\u6708D\u65e5"),I=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var a,n,r;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,k.Ab)({task_id:t.id});case 2:a=e.sent,n=a.code,r=a.data.rows,200===n&&x(r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=e=>{"success"===e&&T(C+1),Z(!1)};return(0,u.useEffect)((()=>{t.id&&I()}),[t.id,C]),u.createElement("div",{className:Le()["working-hour"]},u.createElement("div",{className:Le().label},u.createElement("span",{className:Le().title},u.createElement(ve.Z,{className:Le().iconfont}),"\u5de5\u65f6")),u.createElement("div",{className:Le().content},u.createElement(n.Z,{type:"text",className:Le()["btn-add-working-hour"],icon:u.createElement(b.Z,null),onClick:z},"\u6dfb\u52a0\u5b9e\u9645\u5de5\u65f6"),u.createElement("div",{className:Le()["wrap-working-hour-list"]},y.map((function(e,t){return u.createElement("div",{className:Le().item},u.createElement("div",{className:Le()["wrap-working-hour-content"]},u.createElement(L.C,{src:e.executor?e.executor.avatar:"",style:{width:"26px",height:"26px"}}),u.createElement("div",null,u.createElement("div",{className:Le()["wrap-info"]},u.createElement("span",{className:Le().name},e.executor&&e.executor.username),u.createElement("span",{className:Le()["start-date"]},D(e.start_date)),"\u5b9e\u9645\u5de5\u65f6\u4e3a ",e.work_time," \u5c0f\u65f6"),e.description?u.createElement("div",{className:"".concat(Le().description)},e.description):null)),u.createElement("div",{className:Le().ctrl},u.createElement(n.Z,{className:Le().icon,icon:u.createElement(j.Z,null),type:"text",onClick:t=>P(e,t)}),u.createElement(n.Z,{className:Le().icon,icon:u.createElement(g.Z,null),type:"text",onClick:t=>M(e,t)})))}),void 0))),u.createElement(Pe,{currentTask:t,currentProject:a,isCurrentProjectMember:c,selectedWorkHour:p,workHourDialogVisible:f,handleWorkHourSuccess:O}))},Ie=De,Oe=a(25398),Be=a.n(Oe),He=a(42579),Re=e=>{var t,a=e.currentTask,r=void 0===a?{}:a,s=e.currentProject,d=void 0===s?{}:s,p=(0,u.useState)([]),_=(0,m.Z)(p,2),Z=_[0],h=_[1],j=(0,u.useState)(!1),g=(0,m.Z)(j,2),y=g[0],b=g[1],x=(0,w.tT)("@@initialState"),N=x.initialState,C=(0,u.useState)(!1),T=(0,m.Z)(C,2),z=T[0],P=(T[1],(0,u.useState)("")),M=(0,m.Z)(P,2),D=M[0],O=M[1],B=(0,u.useState)([]),H=(0,m.Z)(B,2),V=(H[0],H[1]),Y=(0,u.useState)({id:0,username:"\u5f85\u8ba4\u9886"}),A=(0,m.Z)(Y,2),F=A[0],q=(A[1],(0,u.useState)([])),J=(0,m.Z)(q,2),W=J[0],U=J[1],K=N||{},Q=(0,u.useState)(0),G=(0,m.Z)(Q,2),X=(G[0],G[1],K.id===(null===d||void 0===d?void 0:d.manager_id)),$=e=>e.filter((e=>!Z.some((t=>t.id===e.id))));(0,u.useEffect)((()=>{null!==d&&void 0!==d&&d.id&&te()}),[d]),(0,u.useEffect)((()=>{var e=I()(W)||[];V([...e])}),[F,W]);var ee=()=>{setTimeout(te,300)},te=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var t,a;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,k.lE)({keyword:D,project_id:d.id});case 2:t=e.sent,a=t.data.rows,U(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(t,a){var n,c;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a||t.id!==r.creator_id){e.next=3;break}return i.default.error("\u4e0d\u53ef\u5220\u9664\u521b\u5efa\u8005"),e.abrupt("return");case 3:return e.next=5,(0,k.zz)({task_id:r.id,user_id:t.id});case 5:n=e.sent,c=n.code,200===c&&h(a?[...Z,t]:Z.filter((e=>e.id!==t.id)));case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();(0,u.useEffect)((()=>{z||O("")}),[z]);var ne=()=>{b(!0)},re=e=>{b(!1)};return(0,u.useEffect)((()=>{null!==r&&void 0!==r&&r.participators&&h(r.participators)}),[r]),u.createElement("div",{className:Be().participator},u.createElement("div",{className:Be().title},"\u53c2\u4e0e\u8005 ",u.createElement("span",{className:Be().point}),Z.length),u.createElement("div",{className:Be()["user-list"]},Z.map((function(e,t){return u.createElement(L.C,{key:e.id,src:e.avatar,style:{marginRight:"8px"}})}),void 0),u.createElement(S.Z,{content:u.createElement("div",{className:Be()["popover-content-executor-selector"]},u.createElement(c.Z,{value:D,onChange:e=>O(e.target.value),placeholder:"\u641c\u7d22",prefix:u.createElement(E.Z,null),onKeyUp:ee}),u.createElement("div",{className:Be()["wrap-current-executor"]},u.createElement("div",{className:Be().title},"\u6267\u884c\u8005"),Z.map((function(e,t){return u.createElement("div",{onClick:()=>ae(e),className:Be()["current-executor"]},u.createElement("div",{className:Be()["wrap-info"]},u.createElement(L.C,{size:"small",src:e.avatar||"",icon:u.createElement(f.Z,null)}),u.createElement("span",{className:Be().name},e.username)),u.createElement(v.Z,null))}),void 0),u.createElement("div",{className:Be().title},"\u5176\u4ed6\u6210\u5458"),null===(t=$(W))||void 0===t?void 0:t.map((e=>u.createElement("div",{key:e.id,className:"".concat(Be()["current-executor"]," ").concat(Be()["disabled-custom"]),onClick:()=>ae(e,!0)},u.createElement("div",{className:Be()["wrap-info"]},u.createElement(L.C,{className:Be()["user-avatar"],size:"small",src:e.avatar||"",icon:u.createElement(f.Z,null)}),u.createElement("span",{className:Be().name},e.username)),F.id===e.id&&u.createElement(v.Z,null))))),u.createElement("div",{className:Be()["wrap-footer"]},u.createElement(n.Z,{type:"primary",style:{width:"100%"},onClick:ne,disabled:!X},"\u9080\u8bf7\u65b0\u6210\u5458"))),placement:"bottom",trigger:"click"},u.createElement(He.Z,{className:Be().icon}))),u.createElement(R.Z,{project:d,handleAddMemberFinish:re,addMemberVisible:y}))},Ve=Re,Ye=a(13311),Ae=a.n(Ye),Fe=a(2223),qe=a(51188),Je=a(73101),We=a(70021),Ue=a.n(We),Ke=e=>{var t=e.log,a=void 0===t?{}:t,n=(0,u.useState)(!1),r=(0,m.Z)(n,2),c=r[0],s=r[1],l=()=>{s(!c)};return u.createElement("div",{className:Ue()["log-comment"]},null!==a&&void 0!==a&&a.content&&c?u.createElement("div",{className:"".concat(Ue().content," ").concat(1===a.is_comment?Ue()["content-comment"]:""),dangerouslySetInnerHTML:{__html:a.content},onClick:l}):null,a.content&&!c?u.createElement("div",{className:"".concat(Ue().content," ").concat(1===a.is_comment?Ue()["content-comment"]:""," ").concat(c||1===a.is_comment?"":Ue()["ellipsis-content"]),dangerouslySetInnerHTML:{__html:a.content},onClick:l}):null)},Qe=Ke,Ge=a(51153),Xe=a.n(Ge),$e={create:u.createElement(b.Z,{className:Xe()["operator-icon"]}),state:u.createElement(Fe.Z,{className:Xe()["operator-icon"]}),edit:u.createElement(j.Z,{className:Xe()["operator-icon"]}),priority:u.createElement(j.Z,{className:Xe()["operator-icon"]}),executor_remove:u.createElement(f.Z,{className:Xe()["operator-icon"]}),executor_claim:u.createElement(f.Z,{className:Xe()["operator-icon"]}),executor_assign:u.createElement(f.Z,{className:Xe()["operator-icon"]}),start_date:u.createElement(qe.Z,{className:Xe()["operator-icon"]}),end_date:u.createElement(qe.Z,{className:Xe()["operator-icon"]}),remark:u.createElement(q.B,{type:"beizhu",className:Xe()["operator-icon"]}),is_recycle:u.createElement(g.Z,{className:Xe()["operator-icon"]}),is_done:u.createElement(v.Z,{className:Xe()["operator-icon"]})},et=e=>{var t=e.currentTask,a=void 0===t?{}:t,s=e.currentProject,p=void 0===s?{}:s,_=(0,u.useState)(!1),v=(0,m.Z)(_,2),E=v[0],f=v[1],Z=(0,w.tT)("@@initialState"),j=Z.initialState,g=j||{},b=(0,u.useRef)(null),x=(0,u.useState)(!1),N=(0,m.Z)(x,2),C=N[0],T=N[1],z=(0,u.useState)(""),P=(0,m.Z)(z,2),D=P[0],I=P[1],O=(0,u.useState)([]),B=(0,m.Z)(O,2),H=B[0],R=B[1],V=(0,u.useState)(0),Y=(0,m.Z)(V,2),A=Y[0],F=Y[1],J=(0,u.useState)("1"),W=(0,m.Z)(J,2),U=W[0],K=W[1],Q=[{key:"1",label:"\u6240\u6709\u52a8\u6001"},{key:"2",label:"\u4ec5\u8bc4\u8bba"},{key:"3",label:"\u4ec5\u52a8\u6001"}],G=5,X=()=>E?H:H.filter(((e,t)=>t>H.length-G-1)),ee=()=>!(H.length<=G)&&(E?"\u9690\u85cf\u8f83\u65e9\u7684\u52a8\u6001":"\u663e\u793a\u8f83\u65e9\u7684 ".concat(H.length-G," \u6761\u52a8\u6001")),te=e=>{K(e.key)},ae=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var t,n,r,c;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={task_id:a.id},U===Q[1]["key"]&&(t.is_comment=1),e.next=4,(0,k.E7)(t);case 4:n=e.sent,r=n.code,c=n.data.rows,200===r&&R(c.map((e=>(0,h.Z)((0,h.Z)({},e),{},{created_at_humanize:(0,Je.n3)(e.created_at).value}))));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=e=>{I(e.target.value),/@$/.test(e.target.value)&&!C&&T(!0)},re=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var t,n;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==D.trim()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,k._d)({content:D,task_id:a.id,project_id:p.id,operator_id:g.id,type:"comment",is_comment:1});case 4:t=e.sent,n=t.code,200===n&&(i.default.success("\u8bc4\u8bba\u6210\u529f"),I(""),F(A+1));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=e=>{I(D+e.username+" "),T(!1),b.current.focus({cursor:"end"})},se=()=>{f(!E)};return(0,u.useEffect)((()=>{null!==a&&void 0!==a&&a.id&&U&&ae()}),[a,U,A]),u.createElement("div",{className:Xe()["task-log"]},u.createElement("div",{className:Xe()["wrap-log"]},u.createElement("div",{className:Xe()["wrap-filter"]},u.createElement(r.Z,{arrow:!0,menu:{items:Q,onClick:te}},u.createElement("div",{className:Xe()["dropdown-title"]},u.createElement(M.Z,null,u.createElement("span",null,Ae()(Q,{key:U})["label"]),u.createElement(d.Z,null))))),u.createElement("div",{className:"".concat(Xe()["log-list"]," ").concat(Xe()["color-light"])},ee()?u.createElement("div",{className:Xe()["btn-more"],onClick:se},u.createElement(y.Z,null),ee()):null,X().map((function(e,t){var a;return u.createElement("div",{className:Xe().item},u.createElement("div",{className:Xe().info},u.createElement("div",{className:Xe()["info-header"]},0===e.is_comment?$e[e.type]:u.createElement(L.C,{className:Xe()["user-avatar"],src:(null===e||void 0===e||null===(a=e.operator)||void 0===a?void 0:a.avatar)||""}),u.createElement("span",{className:Xe()["username-and-remark"]},u.createElement(M.Z,null,u.createElement("span",{className:"".concat(1===e.is_comment?Xe()["username-comment"]:"")},e.operator&&e.operator.username),e.remark))),u.createElement("div",{className:Xe()["create-date"]},u.createElement($.Z,{placement:"top",title:e.create_time},u.createElement("div",null,e.created_at_humanize)))),u.createElement(Qe,{log:e}))}),void 0))),u.createElement("div",{className:Xe()["wrap-comment"]},u.createElement("div",{className:Xe().input},u.createElement(S.Z,{open:C,overlayClassName:Xe()["mention-user-list"],content:u.createElement("div",{className:Xe()["user-list"]},((null===a||void 0===a?void 0:a.participators)||[]).map((function(e,t){return u.createElement("div",{key:e.id,className:Xe()["user-item"],onClick:()=>ce(e)},u.createElement(L.C,{src:e.avatar||"",className:Xe()["user-avatar"]}),u.createElement("div",{className:Xe().username},e.username))}),void 0))}),u.createElement(c.Z.TextArea,{value:D,placeholder:"@ \u63d0\u53ca\u4ed6\u4eba\uff0c\u6309Enter\u5feb\u901f\u53d1\u5e03",autosize:{minRows:2,maxRows:6},onChange:ne,onPressEnter:re,bordered:!1,ref:b}),u.createElement("div",{className:Xe().ctrl},u.createElement(q.B,{className:Xe()["btn-emoji"],type:"emoji"}),u.createElement(n.Z,{type:"link",size:"medium",onClick:re},"\u53d1\u5e03")))))},tt=et,at=le.Z.RangePicker,nt=se.Z.confirm,rt=e=>{var t,a,n,d,p,_,v,E,Z,j=e.taskDialogVisible,y=void 0!==j&&j,b=e.selectedTask,x=void 0===b?{}:b,N=e.handleTaskDialogSuccess,S=e.isCurrentProjectMember,C=void 0!==S&&S,T=e.currentProject,z=void 0===T?{}:T,P=(0,u.useState)({}),M=(0,m.Z)(P,2),L=M[0],D=M[1],I=(0,w.tT)("useTask"),O=I.taskPrioritysList,B=I.taskStatusList;console.log("taskStatusList---------",B);var H=()=>{N("quit")},R=e=>{var t=document.createElement("input"),a=document.createElement("div");t.setAttribute("readonly","readonly"),t.setAttribute("value",e),t.setAttribute("style","position: absolute;left: 100000px;"),a.setAttribute("style","position: absolute;width: 0px;height: 0px;overflow: hidden;"),a.appendChild(t),document.body.appendChild(a),t.select(),document.execCommand("copy"),document.body.removeChild(a)},V=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(t){var a,n;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.currentTarget.blur(),e.next=3,(0,k.wI)({project_id:L.project_id,task_id:L.id});case 3:a=e.sent,n=a.code,200===n&&(i.default.success("\u64cd\u4f5c\u6210\u529f"),N("success"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=()=>{nt({title:"\u60a8\u786e\u5b9a\u8981\u628a\u8be5\u4efb\u52a1\u79fb\u5230\u56de\u6536\u7ad9\u5417\uff1f",icon:u.createElement(ue.Z,null),content:"\u79fb\u52a8\u5230\u56de\u6536\u7ad9\u540e\uff0c\u8be5\u4efb\u52a1\u5c06\u4e0d\u4f1a\u5728\u4efb\u52a1\u5217\u8868\u4e2d\u663e\u793a",okText:"\u786e\u5b9a",okType:"danger",cancelText:"\u53d6\u6d88",onOk(){return(0,o.Z)((0,l.Z)().mark((function e(){var t,a;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,k.xJ)((0,h.Z)((0,h.Z)({},L),{},{is_recycle:1}));case 2:t=e.sent,a=t.code,200===a&&(i.default.success("\u64cd\u4f5c\u6210\u529f"),N("success"));case 5:case"end":return e.stop()}}),e)})))()},onCancel(){i.default.info("\u64cd\u4f5c\u53d6\u6d88")}})},F=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(t){var a,n,r;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.key,e.next=3,(0,k.xJ)((0,h.Z)((0,h.Z)({},L),{},{is_done:6===Number(a)?1:0,task_state_id:Number(a)}));case 3:n=e.sent,r=n.code,200===r&&N("success");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(t){var a,n,r;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.key,e.next=3,(0,k.xJ)((0,h.Z)((0,h.Z)({},L),{},{task_priority_id:Number(a)}));case 3:n=e.sent,r=n.code,200===r&&N("success");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=()=>{R("".concat(window.location.origin,"/project-manage/project/").concat(L.project_id)),ce.default.info({message:"\u53ef\u7c98\u8d34\u5230\u5730\u5740\u680f\u4e2d\uff0c\u5feb\u901f\u6253\u5f00\u6b64\u4efb\u52a1",description:"\u590d\u5236\u94fe\u63a5\u6210\u529f"})},U=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var t,a;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,k.xJ)((0,h.Z)({},L));case 2:t=e.sent,a=t.code,200===a&&N("success");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=e=>{D((0,h.Z)((0,h.Z)({},L),{},{name:e.target.value}))},Q=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(t){var a,n;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,k.xJ)((0,h.Z)((0,h.Z)({},L),{},{executor_id:t.id}));case 2:a=e.sent,n=a.code,200===n&&N("success");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(t,a){var n,r;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,k.xJ)((0,h.Z)((0,h.Z)({},L),{},{start_date:a[0],end_date:a[1]}));case 2:n=e.sent,r=n.code,200===r&&N("success");case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return(0,u.useEffect)((()=>{y&&x&&D((0,h.Z)({},x))}),[y,x]),u.createElement(se.Z,{title:u.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},u.createElement("div",null,u.createElement(q.B,{type:null===x||void 0===x||null===(t=x.type)||void 0===t?void 0:t.icon,style:{color:null===x||void 0===x||null===(a=x.type)||void 0===a?void 0:a.color,fontSize:"16px",marginRight:"8px"}}),null===x||void 0===x||null===(n=x.type)||void 0===n?void 0:n.name),u.createElement("div",null,u.createElement(me.Z,{icon:u.createElement(q.B,{type:"link",style:{fontSize:"18px"}}),tooltipContent:"\u590d\u5236\u94fe\u63a5",type:"text",btnStyle:{marginRight:"8px"},onClick:W}),u.createElement(me.Z,{tooltipContent:"\u70b9\u4e2a\u8d5e",btnStyle:{marginRight:"8px"},icon:u.createElement(q.B,{type:"dianzan",style:{fontSize:"18px"}}),type:L.likers&&L.likers.length?"link":"text",onClick:V},L.likers&&L.likers.length?u.createElement("span",{style:{marginLeft:"4px"}},L.likers&&L.likers.length):null),u.createElement(me.Z,{icon:u.createElement(g.Z,{style:{fontSize:"16px"}}),tooltipContent:"\u79fb\u5230\u56de\u6536\u7ad9",type:"text",btnStyle:{marginRight:"8px"},onClick:A}),u.createElement(de.Z,{className:oe()["close-icon"],onClick:H}))),width:1200,open:y,footer:null,closable:!1,className:oe()["task-dialog"]},u.createElement("div",null,u.createElement(ae.Z,null,u.createElement(ne.Z,{span:14},u.createElement("div",{className:oe()["wrap-task"]},u.createElement("div",{className:"".concat(oe()["wrap-name"]," ").concat(1===L.is_done?oe()["wrap-name-done"]:"")},u.createElement(c.Z.TextArea,{value:L.name,disabled:!C,onChange:K,bordered:!1,autoSize:{minRows:1,maxRows:4},onBlur:U})),u.createElement("div",{className:"".concat(oe()["wrap-item"])},u.createElement("div",{className:oe().label},u.createElement(q.B,{className:"".concat(oe().iconfont),type:"xuanzhong"}),"\u5b8c\u6210\u72b6\u6001"),u.createElement("div",{className:oe().content},u.createElement(r.Z,{trigger:["click"],dropdownRender:()=>u.createElement(s.Z,{onClick:F,className:oe()["wrap-item-menu"]},B.map((function(e,t){return u.createElement(s.Z.Item,{className:oe()["menu-item"],key:e.id},u.createElement(q.B,{type:e.icon,style:{color:e.color,fontSize:"16px"}}),u.createElement("span",{style:{margin:"0 4px"}},e.name+e.color))}),void 0))},u.createElement("div",null,u.createElement(q.B,{type:null===L||void 0===L||null===(d=L.state)||void 0===d?void 0:d.icon,style:{color:null===L||void 0===L||null===(p=L.state)||void 0===p?void 0:p.color,fontSize:"16px"}}),u.createElement("span",{style:{margin:"0 4px"}},null===L||void 0===L||null===(_=L.state)||void 0===_?void 0:_.name))))),u.createElement("div",{className:oe()["wrap-item"]},u.createElement("div",{className:oe().label},u.createElement(f.Z,{className:"".concat(oe().iconfont)})," \u6267\u884c\u8005"),u.createElement("div",{className:oe().content},u.createElement(Y,{currentProject:z,executorId:null===L||void 0===L||null===(v=L.executor)||void 0===v?void 0:v.id,isCurrentProjectMember:C,showNoOne:!0,onSelect:Q}))),u.createElement("div",{className:oe()["wrap-item"]},u.createElement("div",{className:oe().label},u.createElement(q.B,{className:"".concat(oe().iconfont),type:"date"}),"\u65f6\u95f4"),u.createElement("div",{className:oe().content},u.createElement(at,{valelue:[_e()(L.start_date),_e()(L.end_date)],size:"small",showTime:{hideDisabledOptions:!0,defaultValue:[_e()("00:00:00","HH:mm:ss"),_e()("11:59:59","HH:mm:ss")]},format:"YYYY-MM-DD HH:mm:ss",onChange:G}))),u.createElement("div",{className:oe()["wrap-item"]},u.createElement("div",{className:oe().label},u.createElement(q.B,{className:"".concat(oe().iconfont),type:"youxianji"}),"\u4f18\u5148\u7ea7"),u.createElement("div",{className:oe().content},u.createElement(r.Z,{trigger:["click"],dropdownRender:()=>u.createElement(s.Z,{onClick:J,className:oe()["wrap-item-menu"]},O.map((function(e,t){return u.createElement(s.Z.Item,{className:oe()["menu-item"],key:e.id},u.createElement(re.Z,{color:e.color},e.name))}),void 0))},u.createElement("div",null,u.createElement(re.Z,{color:null===L||void 0===L||null===(E=L.priority)||void 0===E?void 0:E.color},null===L||void 0===L||null===(Z=L.priority)||void 0===Z?void 0:Z.name))))),u.createElement("div",{className:oe()["wrap-item"]},u.createElement("div",{className:oe().label},u.createElement(q.B,{className:"".concat(oe().iconfont),type:"beizhu"}),"\u5907\u6ce8"),u.createElement("div",null,u.createElement(c.Z.TextArea,{placeholder:"\u5907\u6ce8",value:L.remark,onChange:e=>D((0,h.Z)((0,h.Z)({},L),{},{remark:e.target.value})),disabled:!C,autoSize:!0,bordered:!1,onBlur:U}))),u.createElement(Ie,{currentTask:L,currentProject:z,isCurrentProjectMember:C}))),u.createElement(ne.Z,{span:10},u.createElement("div",{className:oe()["wrap-dynamic"]},u.createElement(Ve,{currentTask:L,currentProject:z}),u.createElement(tt,{currentTask:L,currentProject:z}))))))},ct=rt,st=e=>{var t=e.element,a=e.isCurrentProjectMember,n=void 0!==a&&a,r=e.handleTaskUpdateSuccess,c=e.currentProject,s=void 0===c?{}:c,d=(0,w.tT)("useTask"),p=d.taskPrioritysList,_=d.taskStatusList,v=d.taskTypeList,E=(0,u.useState)(t),f=(0,m.Z)(E,2),Z=f[0],j=f[1],g=(0,u.useState)(!1),y=(0,m.Z)(g,2),b=y[0],x=y[1],N=e=>{"success"===e&&r(),"quit"===e&&x(!1)},S=e=>e&&p.length?null===p||void 0===p?void 0:p.find((e=>e.id===t.task_priority_id)):"",C=e=>e&&_.length?null===_||void 0===_?void 0:_.find((e=>e.id===t.task_state_id)):{},T=e=>e&&v.length?null===v||void 0===v?void 0:v.find((e=>e.id===t.task_type_id)):{},z=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(t,a){var c,s;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.stopPropagation(),n){e.next=4;break}return i.default.warning("\u60a8\u4e0d\u662f\u9879\u76ee\u6210\u5458\uff0c\u65e0\u6cd5\u64cd\u4f5c"),e.abrupt("return");case 4:return t.is_done=1===t.is_done?0:1,e.next=7,(0,k.xJ)(t);case 7:c=e.sent,s=c.code,200===s&&(i.default.success("\u72b6\u6001\u4fee\u6539\u6210\u529f"),r());case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),P=()=>{x(!0)};return(0,u.useEffect)((()=>{j((0,h.Z)((0,h.Z)({},t),{},{state:C(t.task_state_id),type:T(t.task_type_id),priority:S(t.task_priority_id)}))}),[t]),u.createElement(u.Fragment,null,u.createElement("div",{onClick:P,className:"".concat(te()["list-group-item"]," ").concat(1===(null===Z||void 0===Z?void 0:Z.is_done)?te()["list-group-item-done"]:"")},u.createElement("div",{className:te().state},u.createElement($.Z,{title:Z.state&&Z.state.name,placement:"top"},u.createElement(q.B,{type:Z.state&&Z.state.icon,style:{color:Z.state&&Z.state.color,fontSize:"18px"}}))),u.createElement("div",{className:te()["wrap-done"]},u.createElement(q.B,{onClick:e=>z(Z,e),type:1===(null===Z||void 0===Z?void 0:Z.is_done)?"xuanzhong":"weixuanzhong",style:{fontSize:"18px"}})),u.createElement("div",{className:te().content},u.createElement("div",{className:te().name},Z.name),u.createElement("div",{className:te().info},Z.date_tip&&1!==Z.is_done&&u.createElement("span",{className:"".concat(te()["info-item"]," ").concat(te()["task-date"]," ").concat(Z.date_tip_class)},Z.date_tip),Z.type&&u.createElement($.Z,{title:Z.type.name,placement:"top"},u.createElement(q.B,{className:te()["info-item"],type:Z.type&&Z.type.icon,style:{color:Z.type&&Z.type.color,fontSize:"18px"}})),Z.remark&&u.createElement(q.B,{className:"".concat(te()["info-item"]," ").concat(te()["color-light"]),type:"beizhu",style:{fontSize:"16px"}}),Z.likers&&Z.likers.length>0&&u.createElement("span",{className:"".concat(te()["info-item"]," ").concat(te()["color-light"])},u.createElement(q.B,{type:"dianzan",style:{fontSize:"16px"}}),u.createElement("span",{style:{paddingLeft:"5px",fontSize:"12px"}},Z.likers.length)))),u.createElement("div",{className:te().executor},Z.executor&&u.createElement($.Z,{title:Z.executor.username,placement:"top"},u.createElement(L.C,{src:Z.executor.avatar||"",style:{width:"26px",height:"26px"}}))),u.createElement("div",{className:te()["task-priority"],style:{backgroundColor:S(Z.task_priority_id)["color"]}})),u.createElement(ct,{isCurrentProjectMember:n,taskDialogVisible:b,selectedTask:Z,handleTaskDialogSuccess:N,currentProject:s}))},lt=st,it=e=>{var t=e.taskListObj,a=e.refreshTaskList,n=e.isCurrentProjectMember,r=e.currentProject,c=(0,u.useState)([]),s=(0,m.Z)(c,2),i=s[0],d=s[1],p=(0,u.useState)([]),_=(0,m.Z)(p,2),v=_[0],E=_[1],f=(0,u.useState)(0),Z=(0,m.Z)(f,2),w=Z[0],h=Z[1],j=()=>{h(w+1)},g=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var a,n,r,c,s;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,k.ZS)({task_list_id:t.id,limit:1e3,offset:0});case 2:a=e.sent,n=a.code,r=a.data,c=r.rows,r.count,200===n&&(s=Q()(c,"is_done"),E(s["0"]||[]),d(s["1"]||[]));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,u.useEffect)((()=>{t.id&&g()}),[t.id,w,a]),u.createElement("div",{className:X()["task-list"]},v.map((function(e,t){return 0===e.is_recycle?u.createElement(lt,{element:e,currentProject:r,isCurrentProjectMember:n,handleTaskUpdateSuccess:j}):null}),void 0),i.map((function(e,t){return 0===e.is_recycle?u.createElement(lt,{element:e,currentProject:r,isCurrentProjectMember:n,handleTaskUpdateSuccess:j}):null}),void 0))},ot=it,mt=(a(67604),a(76592)),ut=a(90322),dt=a.n(ut),pt=e=>{var t=e.selectedTaskList,a=e.editorTaskListDialogVisible,r=e.handleEditorTaskListDialogSuccess,s=mt.Z.useForm(),d=(0,m.Z)(s,1),p=d[0],_=()=>{p.resetFields(),r("quit")},v=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(a){var n,c;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,k.hs)((0,h.Z)((0,h.Z)({},t),a));case 2:n=e.sent,c=n.code,200===c&&(i.default.success("\u7f16\u8f91\u6210\u529f"),r("success"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=()=>{p.validateFields().then((e=>{v(e)}))};return(0,u.useEffect)((()=>{t&&a&&p.setFieldsValue(t)}),[t,a]),u.createElement(se.Z,{title:"\u7f16\u8f91\u5217\u8868",open:a,onCancel:_,footer:[u.createElement(n.Z,{key:"back",onClick:_},"\u53d6\u6d88"),u.createElement(n.Z,{key:"submit",type:"primary",onClick:E},"\u786e\u8ba4")],className:dt()["editor-task-list-dialog"]},u.createElement(mt.Z,{form:p,labelCol:{span:5},onFinish:E},u.createElement(mt.Z.Item,{name:"name",label:"\u5217\u8868\u540d\u79f0\uff1a",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5217\u8868\u540d\u79f0"},{min:2,max:20,message:"\u957f\u5ea6\u5728 2 \u5230 20 \u4e2a\u5b57\u7b26"}]},u.createElement(c.Z,{placeholder:"\u5217\u8868\u540d\u79f0"}))))},_t=pt,vt=e=>{var t,a=e.currentProject,c=e.taskListSearchCondition,d=(0,w.tT)("@@initialState"),p=d.initialState,_=p,v=null===a||void 0===a||null===(t=a.member)||void 0===t?void 0:t.some((e=>e.id===_.id)),E=(0,u.useState)([]),f=(0,m.Z)(E,2),Z=f[0],x=f[1],S=(0,u.useState)(0),C=(0,m.Z)(S,2),T=C[0],z=C[1],M=(0,u.useState)(-1),L=(0,m.Z)(M,2),D=L[0],I=L[1],O=(0,u.useState)(!1),B=(0,m.Z)(O,2),H=B[0],R=B[1],V=(0,u.useState)({}),Y=(0,m.Z)(V,2),A=Y[0],F=Y[1],q=(0,u.useState)(0),J=(0,m.Z)(q,2),W=J[0],K=J[1],Q=(0,u.useState)({}),G=(0,m.Z)(Q,2),X=(G[0],G[1]),$=e=>{"success"===e&&(z(T+1),K(W+1)),R(!1)},ee=()=>{z(T+1)},te=e=>{I(-1),z(T+1),K(W+1)},ae=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(t){var a,n;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,k.P4)({task_list_id:t.id});case 2:a=e.sent,n=a.code,200===n&&(K(W+1),z(T+1),i.default.success("\u4efb\u52a1\u79fb\u81f3\u56de\u6536\u7ad9\u6210\u529f"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(t){var a,n;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,k.aj)({ids:[t.id]});case 2:a=e.sent,n=a.code,200===n&&(K(W+1),z(T+1),i.default.success("\u4efb\u52a1\u5217\u8868\u5220\u9664\u6210\u529f"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=(e,t,a)=>{var n=e.key;F(t),"1"===n?R(!0):"2"===n?ae(t):"3"===n&&ne(t)},ce=(e,t,a)=>{a.currentTarget.blur(),I(t)},se=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var t,n,r,s;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,k.QY)((0,h.Z)({project_id:a.id,limit:1e3,offset:0},c));case 2:t=e.sent,n=t.code,r=t.data.rows,200===n&&(s={},r.forEach((e=>{s[e.id]=0})),X(s),x(r));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,u.useEffect)((()=>{a.id&&se()}),[a,T,c]),u.createElement("div",{className:N()["task-list"]},Z.map(((e,t)=>u.createElement("div",{key:t,className:N()["wrap-item"]},u.createElement("div",{className:N()["task-list-info"]},u.createElement("div",{className:N().name},e.name,u.createElement("span",{className:N()["name-point"]}),e.tasks?e.tasks.filter((e=>0===e.is_recycle)).length:0),u.createElement("div",{className:N().more},u.createElement(r.Z,{dropdownRender:()=>u.createElement(s.Z,{onClick:a=>re(a,e,t)},u.createElement(s.Z.Item,{className:N()["menu-item"],key:"1"},u.createElement(j.Z,null),u.createElement("span",{className:N()["menu-item-title"]},"\u7f16\u8f91\u5217\u8868")),u.createElement(s.Z.Item,{className:N()["menu-item"],key:"2"},u.createElement(g.Z,null),u.createElement("span",{className:N()["menu-item-title"]},"\u672c\u5217\u6240\u6709\u4efb\u52a1\u79fb\u81f3\u56de\u6536\u7ad9")),u.createElement(s.Z.Item,{className:N()["menu-item"],key:"3"},u.createElement(g.Z,null),u.createElement("span",{className:N()["menu-item-title"]},"\u5220\u9664\u8be5\u5217\u6240\u6709\u5185\u5bb9")))},u.createElement(y.Z,null)))),u.createElement(ot,{refreshTaskList:W,taskListObj:e,isCurrentProjectMember:v,currentProject:a}),D!==t?u.createElement(n.Z,{block:!0,icon:u.createElement(b.Z,{style:{color:"#ccc"}}),onClick:a=>ce(e,t,a),disabled:!v}):u.createElement(U,{currentTaskListObj:e,handleCreateTaskSuccess:te,isCurrentProjectMember:v,currentProject:a})))),u.createElement(P,{currentProject:a,handleCreateSuccess:ee}),u.createElement(_t,{selectedTaskList:A,editorTaskListDialogVisible:H,handleEditorTaskListDialogSuccess:$}))},Et=vt,ft=(a(97140),a(38699)),kt=a(12082),Zt=a.n(kt),wt=ft.Z.Option,ht=e=>{var t=e.projectMembers,a=void 0===t?[]:t,r=e.taskListSearchCondition,s=void 0===r?{}:r,l=e.setTaskListSearchCondition,i=(0,w.tT)("useTask"),o=i.taskPrioritysList,d=i.taskStatusList,p=mt.Z.useForm(),_=(0,m.Z)(p,1),v=_[0],f=(0,u.useState)(!1),k=(0,m.Z)(f,2),Z=k[0],j=k[1],g=[{value:-1,label:"\u5168\u90e8"},{value:1,label:"\u662f"},{value:0,label:"\u5426"}],y=()=>{var e=v.getFieldsValue();l((0,h.Z)({},e)),console.log("values",e)},b=()=>{v.resetFields()},x=u.createElement("div",{className:Zt()["task-filter-wrap-content"]},u.createElement(mt.Z,{defaultValue:s,form:v,labelCol:{span:8},wrapperCol:{span:16}},u.createElement(mt.Z.Item,{label:"\u6807\u9898",name:"name"},u.createElement(c.Z,{placeholder:"\u641c\u7d22\u4efb\u52a1\u6807\u9898"})),u.createElement(mt.Z.Item,{label:"\u6267\u884c\u8005",name:"executor_ids"},u.createElement(ft.Z,{mode:"multiple",placeholder:"\u8bf7\u9009\u62e9"},a.map((e=>u.createElement(wt,{key:e.id,value:e.id},e.username))))),u.createElement(mt.Z.Item,{label:"\u521b\u5efa\u8005",name:"creator_ids"},u.createElement(ft.Z,{mode:"multiple",placeholder:"\u8bf7\u9009\u62e9"},a.map((e=>u.createElement(wt,{key:e.id,value:e.id},e.username))))),u.createElement(mt.Z.Item,{label:"\u662f\u5426\u5b8c\u6210",name:"is_done"},u.createElement(ft.Z,{placeholder:"\u8bf7\u9009\u62e9"},g.map((e=>u.createElement(wt,{key:e.value,value:e.value},e.label))))),u.createElement(mt.Z.Item,{label:"\u4f18\u5148\u7ea7",name:"task_priority_ids"},u.createElement(ft.Z,{mode:"multiple",placeholder:"\u8bf7\u9009\u62e9"},o.map((e=>u.createElement(wt,{key:e.id,value:e.id},e.name))))),u.createElement(mt.Z.Item,{label:"\u6267\u884c\u72b6\u6001",name:"task_state_ids"},u.createElement(ft.Z,{mode:"multiple",placeholder:"\u8bf7\u9009\u62e9"},d.map((e=>u.createElement(wt,{key:e.id,value:e.id},e.name))))),u.createElement(mt.Z.Item,{wrapperCol:{offset:8}},u.createElement(M.Z,null,u.createElement(n.Z,{type:"primary",onClick:y},"\u641c\u7d22"),u.createElement(n.Z,{onClick:b},"\u91cd\u7f6e")))));return u.createElement("div",{className:Zt()["task-filter"]},u.createElement(S.Z,{placement:"bottom",content:x,trigger:"click",open:Z,onOpenChange:j},u.createElement(n.Z,{icon:u.createElement(E.Z,null),type:"link",size:"small"},"\u7b5b\u9009")))},jt=ht,gt=()=>{var e=(0,u.useState)(!1),t=(0,m.Z)(e,2),a=t[0],p=t[1],h=(0,u.useState)({}),j=(0,m.Z)(h,2),g=j[0],y=j[1],b=(0,Z.UO)(),x=b.id,N=(0,u.useState)({}),S=(0,m.Z)(N,2),C=(S[0],S[1],(0,u.useState)(["\u4efb\u52a1"])),T=(0,m.Z)(C,2),z=T[0],P=(T[1],(0,u.useState)(0)),M=(0,m.Z)(P,2),L=M[0],D=M[1],I=(0,u.useState)(),O=(0,m.Z)(I,2),B=(O[0],O[1],(0,u.useState)([])),H=(0,m.Z)(B,2),V=H[0],Y=H[1],A=(0,u.useState)(0),F=(0,m.Z)(A,2),q=F[0],J=F[1],W=(0,u.useState)(""),U=(0,m.Z)(W,2),K=U[0],Q=U[1],G=(0,u.useState)({}),X=(0,m.Z)(G,2),$=X[0],ee=X[1],te=(0,u.useState)(""),ae=(0,m.Z)(te,2),ne=ae[0],re=(ae[1],V.filter((e=>e.name.toLowerCase().includes(ne.toLowerCase()))),function(){var e=(0,o.Z)((0,l.Z)().mark((function e(t){var a,n,r;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,k.HW)({id:t});case 2:a=e.sent,200===a.code?(ee(a.data),console.log("setCurrentProject--------",a.data),D((null===a||void 0===a||null===(n=a.data)||void 0===n||null===(r=n.member)||void 0===r?void 0:r.length)||0)):i.default.error(a.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ce=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var t;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,k.ku)({});case 2:t=e.sent,200===t.code?Y(t.data.rows):i.default.error(t.message);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=e=>{p(!1)},le=()=>{p(!0)};(0,u.useEffect)((()=>{x&&(re(x),ce(),J(0))}),[x]);var ie=e=>{w.m8.replace("/project-manage/project/".concat(e.id))},oe=u.createElement(s.Z,null,V.filter((e=>e.name.includes(K))).map((e=>u.createElement(s.Z.Item,{onClick:()=>ie(e),key:e.id},u.createElement("div",{className:_()["project-task-wrap-dropdown-item"]},u.createElement("div",{className:_().info},u.createElement("img",{width:32,height:32,style:{borderRadius:"32px"},src:e.cover,alt:""}),u.createElement("div",{className:_().name},e.name)),e.id===(null===$||void 0===$?void 0:$.id)&&u.createElement(v.Z,null))))));return u.createElement("div",{className:_()["project-task"]},u.createElement("div",{className:_()["wrap-nav"]},u.createElement(r.Z,{trigger:["click"],placement:"bottomRight",dropdownRender:()=>u.createElement("div",{className:_()["project-task-project-dropdown"]},u.createElement("div",{className:_()["input-box"]},u.createElement(c.Z,{placeholder:"\u641c\u7d22",value:K,onChange:e=>Q(e.target.value),className:_()["project-task-wrap-dropdown-input"],prefix:u.createElement(E.Z,null)})),oe)},u.createElement("span",{className:_()["project-name"]},null===$||void 0===$?void 0:$.name," ",u.createElement(d.Z,null))),u.createElement("div",{className:_().tab},z.map(((e,t)=>u.createElement("div",{key:t,className:"".concat(_()["item-tab"]," ").concat(q===t?_().active:""),onClick:()=>J(t)},e)))),u.createElement("div",{className:_()["wrap-controller"]},u.createElement(jt,{projectMembers:null===$||void 0===$?void 0:$.member,taskListSearchCondition:g,setTaskListSearchCondition:y}),u.createElement(n.Z,{onClick:le,type:"link",icon:u.createElement(f.Z,null)},u.createElement("span",null,L)))),u.createElement("div",{className:_()["wrap-content"]},0===q?u.createElement(Et,{taskListSearchCondition:g,currentProject:$}):null),u.createElement(R.Z,{project:$,handleAddMemberFinish:se,addMemberVisible:a}))};gt.layout={hideMenu:!0,hideFooter:!0};var yt=gt},46700:function(e,t,a){var n={"./af":60757,"./af.js":60757,"./ar":22490,"./ar-dz":15633,"./ar-dz.js":15633,"./ar-kw":12602,"./ar-kw.js":12602,"./ar-ly":34074,"./ar-ly.js":34074,"./ar-ma":98317,"./ar-ma.js":98317,"./ar-sa":29752,"./ar-sa.js":29752,"./ar-tn":66061,"./ar-tn.js":66061,"./ar.js":22490,"./az":92136,"./az.js":92136,"./be":57080,"./be.js":57080,"./bg":48473,"./bg.js":48473,"./bm":38856,"./bm.js":38856,"./bn":17146,"./bn-bd":5223,"./bn-bd.js":5223,"./bn.js":17146,"./bo":30594,"./bo.js":30594,"./br":48831,"./br.js":48831,"./bs":67530,"./bs.js":67530,"./ca":82766,"./ca.js":82766,"./cs":3830,"./cs.js":3830,"./cv":74487,"./cv.js":74487,"./cy":60146,"./cy.js":60146,"./da":66186,"./da.js":66186,"./de":86621,"./de-at":72833,"./de-at.js":72833,"./de-ch":78113,"./de-ch.js":78113,"./de.js":86621,"./dv":32345,"./dv.js":32345,"./el":69981,"./el.js":69981,"./en-au":16498,"./en-au.js":16498,"./en-ca":94555,"./en-ca.js":94555,"./en-gb":93204,"./en-gb.js":93204,"./en-ie":89988,"./en-ie.js":89988,"./en-il":3777,"./en-il.js":3777,"./en-in":23231,"./en-in.js":23231,"./en-nz":30533,"./en-nz.js":30533,"./en-sg":73034,"./en-sg.js":73034,"./eo":21496,"./eo.js":21496,"./es":65678,"./es-do":76879,"./es-do.js":76879,"./es-mx":55440,"./es-mx.js":55440,"./es-us":66963,"./es-us.js":66963,"./es.js":65678,"./et":41003,"./et.js":41003,"./eu":90013,"./eu.js":90013,"./fa":29692,"./fa.js":29692,"./fi":68102,"./fi.js":68102,"./fil":22918,"./fil.js":22918,"./fo":87496,"./fo.js":87496,"./fr":67474,"./fr-ca":1853,"./fr-ca.js":1853,"./fr-ch":44675,"./fr-ch.js":44675,"./fr.js":67474,"./fy":97061,"./fy.js":97061,"./ga":96867,"./ga.js":96867,"./gd":18364,"./gd.js":18364,"./gl":96383,"./gl.js":96383,"./gom-deva":64220,"./gom-deva.js":64220,"./gom-latn":87202,"./gom-latn.js":87202,"./gu":25249,"./gu.js":25249,"./he":96022,"./he.js":96022,"./hi":65395,"./hi.js":65395,"./hr":29361,"./hr.js":29361,"./hu":93797,"./hu.js":93797,"./hy-am":85874,"./hy-am.js":85874,"./id":77084,"./id.js":77084,"./is":12592,"./is.js":12592,"./it":54296,"./it-ch":35272,"./it-ch.js":35272,"./it.js":54296,"./ja":17620,"./ja.js":17620,"./jv":46898,"./jv.js":46898,"./ka":62752,"./ka.js":62752,"./kk":5632,"./kk.js":5632,"./km":16667,"./km.js":16667,"./kn":88963,"./kn.js":88963,"./ko":35953,"./ko.js":35953,"./ku":72004,"./ku.js":72004,"./ky":71803,"./ky.js":71803,"./lb":12835,"./lb.js":12835,"./lo":98185,"./lo.js":98185,"./lt":40538,"./lt.js":40538,"./lv":74582,"./lv.js":74582,"./me":23663,"./me.js":23663,"./mi":35840,"./mi.js":35840,"./mk":88701,"./mk.js":88701,"./ml":2209,"./ml.js":2209,"./mn":38391,"./mn.js":38391,"./mr":14481,"./mr.js":14481,"./ms":20135,"./ms-my":29977,"./ms-my.js":29977,"./ms.js":20135,"./mt":81029,"./mt.js":81029,"./my":27402,"./my.js":27402,"./nb":18929,"./nb.js":18929,"./ne":29030,"./ne.js":29030,"./nl":18208,"./nl-be":92510,"./nl-be.js":92510,"./nl.js":18208,"./nn":46456,"./nn.js":46456,"./oc-lnc":98952,"./oc-lnc.js":98952,"./pa-in":9734,"./pa-in.js":9734,"./pl":67042,"./pl.js":67042,"./pt":97351,"./pt-br":63673,"./pt-br.js":63673,"./pt.js":97351,"./ro":62080,"./ro.js":62080,"./ru":78025,"./ru.js":78025,"./sd":51922,"./sd.js":51922,"./se":82651,"./se.js":82651,"./si":16258,"./si.js":16258,"./sk":23337,"./sk.js":23337,"./sl":8683,"./sl.js":8683,"./sq":10119,"./sq.js":10119,"./sr":72660,"./sr-cyrl":9322,"./sr-cyrl.js":9322,"./sr.js":72660,"./ss":33350,"./ss.js":33350,"./sv":19607,"./sv.js":19607,"./sw":16552,"./sw.js":16552,"./ta":25391,"./ta.js":25391,"./te":78149,"./te.js":78149,"./tet":27113,"./tet.js":27113,"./tg":4503,"./tg.js":4503,"./th":33665,"./th.js":33665,"./tk":68356,"./tk.js":68356,"./tl-ph":62917,"./tl-ph.js":62917,"./tlh":42669,"./tlh.js":42669,"./tr":34573,"./tr.js":34573,"./tzl":16022,"./tzl.js":16022,"./tzm":881,"./tzm-latn":30897,"./tzm-latn.js":30897,"./tzm.js":881,"./ug-cn":45472,"./ug-cn.js":45472,"./uk":1300,"./uk.js":1300,"./ur":96961,"./ur.js":96961,"./uz":51699,"./uz-latn":87476,"./uz-latn.js":87476,"./uz.js":51699,"./vi":91544,"./vi.js":91544,"./x-pseudo":22086,"./x-pseudo.js":22086,"./yo":85911,"./yo.js":85911,"./zh-cn":38098,"./zh-cn.js":38098,"./zh-hk":53720,"./zh-hk.js":53720,"./zh-mo":10794,"./zh-mo.js":10794,"./zh-tw":36087,"./zh-tw.js":36087};function r(e){var t=c(e);return a(t)}function c(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=c,e.exports=r,r.id=46700}}]);