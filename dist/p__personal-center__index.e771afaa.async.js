(self["webpackChunk"]=self["webpackChunk"]||[]).push([[181],{60706:function(e){e.exports={"personal-center":"personal-center___2Va6p","base-setting":"base-setting___2ijkU","wrap-form":"wrap-form___1C0wX","wrap-photo":"wrap-photo___2v4Vk","wrap-photo-plus":"wrap-photo-plus___zTbPN"}},7154:function(e,a,t){"use strict";t.r(a);t(83557);var n=t(78840),r=(t(13753),t(48429)),l=(t(68137),t(50532)),i=t(90636),s=t(11849),o=t(93224),c=(t(14643),t(92909)),m=t(3182),u=t(2824),p=(t(67604),t(76592)),d=t(67294),v=t(60706),Z=t.n(v),f=t(30155),E=t(7511),h=t(79090),w=t(51042),b=t(90016),g=["username","email"],y=p.Z.Item,_=e=>{var a=(0,E.tT)("@@initialState"),t=a.initialState,v=p.Z.useForm(),_=(0,u.Z)(v,1),k=_[0],S=(0,d.useState)(!1),x=(0,u.Z)(S,2),C=(x[0],x[1],(0,d.useState)("")),T=(0,u.Z)(C,2),F=(T[0],T[1],(0,d.useState)({username:(null===t||void 0===t?void 0:t.username)||"",email:(null===t||void 0===t?void 0:t.email)||"",id:(null===t||void 0===t?void 0:t.id)||"",nickname:(null===t||void 0===t?void 0:t.nickname)||"",phone:(null===t||void 0===t?void 0:t.phone)||"",company:(null===t||void 0===t?void 0:t.company)||"",city:(null===t||void 0===t?void 0:t.city)||""})),N=(0,u.Z)(F,2),U=N[0],V=(N[1],function(){var e=(0,m.Z)((0,i.Z)().mark((function e(a){var t,n;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("person\u9875\u9762",a),a.nickname){e.next=4;break}return c.default.warning("\u8bf7\u8f93\u5165\u6635\u79f0"),e.abrupt("return");case 4:return a.username,a.email,t=(0,o.Z)(a,g),e.next=7,(0,f.rE)((0,s.Z)((0,s.Z)({},t),{},{avatar:z,id:U.id}));case 7:n=e.sent,200===n.code&&c.default.success("\u4fee\u6539\u6210\u529f");case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),j=(0,d.useState)((null===t||void 0===t?void 0:t.avatar)||""),q=(0,u.Z)(j,2),z=q[0],B=q[1],D=(0,d.useState)(!1),I=(0,u.Z)(D,2),L=I[0],M=(I[1],e=>{console.log("file-----",e);var a="image/jpeg"===e.type||"image/png"===e.type;if(!a)return c.default.error("\u4f60\u9700\u8981\u4e0a\u4f20jpeg\u6216\u8005png\u56fe\u7247\u683c\u5f0f!"),!1;var t=e.size/1024/1024<5;return t?(P(e),!1):(c.default.error("\u56fe\u7247\u5fc5\u987b\u5c0f\u4e8e5MB!"),!1)}),P=function(){var e=(0,m.Z)((0,i.Z)().mark((function e(a){var t,n,r;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new FormData,t.append("file",a),e.next=4,(0,f.cT)(t);case 4:n=e.sent,n.code,r=n.data,B(r.path),k.setFieldValue("avatar",r.path);case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),X=d.createElement("div",null,L?d.createElement(h.Z,null):d.createElement(w.Z,null),d.createElement("div",{style:{marginTop:8}},"Upload"));return d.createElement("div",{className:Z()["personal-center"]},d.createElement("div",{className:Z()["base-setting"]},d.createElement("div",{className:Z()["wrap-form"]},d.createElement(p.Z,{name:"ruleForm",form:k,initialValues:U,onFinish:V,labelCol:{span:6},wrapperCol:{span:12}},d.createElement(y,{label:"\u7528\u6237\u540d",name:"username"},d.createElement(l.Z,{disabled:!0})),d.createElement(y,{label:"\u6635\u79f0",name:"nickname",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6635\u79f0"}]},d.createElement(l.Z,null)),d.createElement(y,{label:"\u90ae\u7bb1",name:"email"},d.createElement(l.Z,{disabled:!0})),d.createElement(y,{label:"\u624b\u673a\u53f7",name:"phone",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801"},{pattern:/^1[3456789]\d{9}$/,message:"\u624b\u673a\u53f7\u7801\u683c\u5f0f\u4e0d\u6b63\u786e"}]},d.createElement(l.Z,null)),d.createElement(y,{label:"\u516c\u53f8",name:"company"},d.createElement(l.Z,null)),d.createElement(y,{label:"\u57ce\u5e02",name:"city"},d.createElement(l.Z,null)),d.createElement(y,{wrapperCol:{offset:6,span:12}},d.createElement(r.Z,{type:"primary",htmlType:"submit"},"\u4fdd\u5b58")))),d.createElement("div",{className:Z()["wrap-photo"]},d.createElement(b.Z,{rotationSlider:!0},d.createElement(n.Z,{name:"image",listType:"picture-card",showUploadList:!1,beforeUpload:M},z?d.createElement("img",{src:z,alt:"image",style:{width:"100%"}}):X)))))};a["default"]=_}}]);